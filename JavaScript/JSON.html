<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSON</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <!-- 실무에서는 onclick 이렇게 인라인으로 사용하지 않는다. -->
  <button onclick="renderTable(data)">데이터 호출!</button>
  <!-- <button onclick="ageSort(data)">나이순</button> -->
  <!-- <button onclick="nameSort(data)">이름순</button> -->
  <!-- <button onclick="genderSort(data)">성별</button> -->
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th onclick="indexSort(data)">index</th>
        <th>picture</th>
        <th onclick="ageSort(data)">age</th>
        <th onclick="eyeColorSort(data)">eyeColor</th>
        <th onclick="nameSort(data)">name</th>
        <th onclick="genderSort(data)">gender</th>
        <th onclick="companySort(data)">company</th>
        <th onclick="emailSort(data)">email</th>
        <th onclick="phoneSort(data)">phone</th>
        <th onclick="addressSort(data)">address</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <script src="data.js"></script>
  <script>
    let click = true;
    function itemSort(data, item) {
      if(click) {
        click = false;
        data.sort((a, b) => {
          if (a[item] > b[item]) return 1;
          if (a[item] < b[item]) return -1;
          return 0;
        })
      } else {
        click = true;
        data.sort((a, b) => {
          if (a[item] > b[item]) return -1;
          if (a[item] < b[item]) return 1;
          return 0;
        })
      }
      renderTable(data);
    }
    function indexSort(data) {
      itemSort(data, "index");
    }
    function ageSort(data) {
      itemSort(data, "age");
    }
    function eyeColorSort(data) {
      itemSort(data, "eyeColor");
    }
    function nameSort(data) {
      itemSort(data, "name")
    }
    function genderSort(data) {
      itemSort(data, "gender")
    }
    function companySort(data) {
      itemSort(data, "company")
    }
    function emailSort(data) {
      itemSort(data, "email")
    }
    function phoneSort(data) {
      itemSort(data, "phone")
    }
    function addressSort(data) {
      itemSort(data, "address")
    }
    function renderTable(data) {
      let tbodyData = [];
      for (const iterator of data) {
        tbodyData.push(`
          <tr>
            <td>${iterator.index}</td>
            <td>${iterator.picture}</td>
            <td>${iterator.age}</td>
            <td>${iterator.eyeColor}</td>
            <td>${iterator.name}</td>
            <td>${iterator.gender}</td>
            <td>${iterator.company}</td>
            <td>${iterator.email}</td>
            <td>${iterator.phone}</td>
            <td>${iterator.address}</td>
          </tr>
        `);
      }
      document.querySelector('.table > tbody').innerHTML = tbodyData.join('');
    }
  </script>
</body>
</html>