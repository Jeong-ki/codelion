<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSON</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <!-- 실무에서는 onclick 이렇게 인라인으로 사용하지 않는다. -->
  <button onclick="renderTable(data)">데이터 호출!</button>
  <!-- <button onclick="ageSort(data)">나이순</button> -->
  <!-- <button onclick="nameSort(data)">이름순</button> -->
  <!-- <button onclick="genderSort(data)">성별</button> -->
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th onclick="itemSort('index')">index</th>
        <th>picture</th>
        <th onclick="itemSort('age')">age</th>
        <th onclick="itemSort('eyeColor')">eyeColor</th>
        <th onclick="itemSort('name')">name</th>
        <th onclick="itemSort('gender')">gender</th>
        <th onclick="itemSort('company')">company</th>
        <th onclick="itemSort('email')">email</th>
        <th onclick="itemSort('phone')">phone</th>
        <th onclick="itemSort('address')">address</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <script src="data.js"></script>
  <script>
    let click = true;
    function itemSort(key) {
      if(click) {
        click = false;
        data.sort((a, b) => {
          if (a[key] > b[key]) return 1;
          if (a[key] < b[key]) return -1;
          return 0;
        })
      } else {
        click = true;
        data.sort((a, b) => {
          if (a[key] > b[key]) return -1;
          if (a[key] < b[key]) return 1;
          return 0;
        })
      }
      renderTable(data);
    }
    
    function renderTable(data) {
      let tbodyData = [];
      for (const iterator of data) {
        tbodyData.push(`
          <tr>
            <td>${iterator.index}</td>
            <td>${iterator.picture}</td>
            <td>${iterator.age}</td>
            <td>${iterator.eyeColor}</td>
            <td>${iterator.name}</td>
            <td>${iterator.gender}</td>
            <td>${iterator.company}</td>
            <td>${iterator.email}</td>
            <td>${iterator.phone}</td>
            <td>${iterator.address}</td>
          </tr>
        `);
      }
      document.querySelector('.table > tbody').innerHTML = tbodyData.join('');
    }
  </script>
</body>
</html>